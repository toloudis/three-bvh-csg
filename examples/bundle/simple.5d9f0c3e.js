var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},t={},r=e.parcelRequirefee5;null==r&&((r=function(e){if(e in a)return a[e].exports;if(e in t){var r=t[e];delete t[e];var o={id:e,exports:{}};return a[e]=o,r.call(o.exports,o,o.exports),o.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,a){t[e]=a},e.parcelRequirefee5=r);var o=r("ilwiq"),n=r("jiuw3"),i=r("fUhpq"),s=r("5Rd1x"),d=r("7lx9d"),l=r("kp7Te"),h=r("8Zfx2"),p=r("4CEV9");window.logTriangleDefinitions=p.logTriangleDefinitions;const u={brush1Shape:"box",brush1Complexity:1,brush1Color:"#ffffff",brush2Shape:"sphere",brush2Complexity:1,brush2Color:"#E91E63",operation:p.SUBTRACTION,wireframe:!1,displayBrushes:!0,displayControls:!0,shadows:!0,vertexColors:!1,flatShading:!1,gridTexture:!1,useGroups:!0,enableDebugTelemetry:!0,displayIntersectionEdges:!1,displayTriangleIntersections:!1,displayBrush1BVH:!1,displayBrush2BVH:!1};let m,c,g,w,y,b,f,C,x,M,S,T,E,B,v,I,U,G,O,A=!0;const D=new Map;function F(e,a,t){switch(e.geometry.dispose(),a){case"sphere":e.geometry=new o.SphereGeometry(1,Math.round(o.MathUtils.lerp(5,32,t)),Math.round(o.MathUtils.lerp(5,16,t)));break;case"box":e.geometry=new o.BoxGeometry(1,1,1);break;case"cylinder":e.geometry=new o.CylinderGeometry(.5,.5,1,Math.round(o.MathUtils.lerp(5,32,t)));break;case"torus":e.geometry=new o.TorusGeometry(.6,.2,Math.round(o.MathUtils.lerp(4,16,t)),Math.round(o.MathUtils.lerp(6,30,t)));break;case"torus knot":e.geometry=new o.TorusKnotGeometry(.6,.2,Math.round(o.MathUtils.lerp(16,64,t)),Math.round(o.MathUtils.lerp(4,16,t)));break;case"mesh":e.geometry=G.clone()}e.geometry=e.geometry.toNonIndexed();const r=e.geometry.attributes.position,n=new Float32Array(3*r.count);for(let e=0,a=n.length;e<a;e+=9)n[e+0]=1,n[e+1]=0,n[e+2]=0,n[e+3]=0,n[e+4]=1,n[e+5]=0,n[e+6]=0,n[e+7]=0,n[e+8]=1;e.geometry.setAttribute("color",new o.BufferAttribute(n,3)),A=!0}function N(){requestAnimationFrame(N),x.scale.x=Math.max(x.scale.x,.01),x.scale.y=Math.max(x.scale.y,.01),x.scale.z=Math.max(x.scale.z,.01);const e=u.enableDebugTelemetry;if(A){A=!1,C.updateMatrixWorld(),x.updateMatrixWorld(),I.update(),U.update();const a=window.performance.now();O.debug.enabled=e,O.useGroups=u.useGroups,O.evaluate(C,x,u.operation,M),M.material=u.useGroups?M.material.map((e=>D.get(e))):E;const t=window.performance.now()-a;y.innerText=`${t.toFixed(3)}ms`,e&&(B.setEdges(O.debug.intersectionEdges),v.setTriangles([...O.debug.triangleIntersectsA.getTrianglesAsArray(),...O.debug.triangleIntersectsA.getIntersectionsAsArray()]))}S.visible=u.wireframe,C.visible=u.displayBrushes,x.visible=u.displayBrushes,T.castShadow=u.shadows,f.enabled=u.displayControls,f.visible=u.displayControls,B.visible=e&&u.displayIntersectionEdges,v.visible=e&&u.displayTriangleIntersections,I.visible=u.displayBrush1BVH,U.visible=u.displayBrush2BVH,m.render(g,c)}!async function(){y=document.getElementById("output"),m=new o.WebGLRenderer({antialias:!0}),m.setPixelRatio(window.devicePixelRatio),m.setSize(window.innerWidth,window.innerHeight),m.setClearColor(1118481,1),m.shadowMap.enabled=!0,m.shadowMap.type=o.PCFSoftShadowMap,document.body.appendChild(m.domElement),g=new o.Scene,T=new o.DirectionalLight(16777215,1),T.position.set(-1,2,3),g.add(T,T.target),g.add(new o.AmbientLight(11583173,.1));const e=T.shadow.camera;let a;T.castShadow=!0,T.shadow.mapSize.setScalar(4096),T.shadow.bias=1e-5,T.shadow.normalBias=.01,e.left=e.bottom=-2.5,e.right=e.top=2.5,e.updateProjectionMatrix(),c=new o.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,50),c.position.set(1,2,4),c.far=100,c.updateProjectionMatrix(),b=new(0,s.OrbitControls)(c,m.domElement),f=new(0,i.TransformControls)(c,m.domElement),f.setSize(.75),f.addEventListener("dragging-changed",(e=>{b.enabled=!e.value})),f.addEventListener("objectChange",(()=>{A=!0})),g.add(f),O=new(0,p.Evaluator),O.attributes=["position","normal"],C=new(0,p.Brush)(new o.BoxGeometry,new(0,p.GridMaterial)),x=new(0,p.Brush)(new o.BoxGeometry,new(0,p.GridMaterial)),x.position.set(-.75,.75,0),x.scale.setScalar(.75),F(C,u.brush1Shape,u.brush1Complexity),F(x,u.brush2Shape,u.brush2Complexity),C.material.opacity=.15,C.material.transparent=!0,C.material.depthWrite=!1,C.material.polygonOffset=!0,C.material.polygonOffsetFactor=.2,C.material.polygonOffsetUnits=.2,C.material.side=o.DoubleSide,C.material.premultipliedAlpha=!0,x.material.opacity=.15,x.material.transparent=!0,x.material.depthWrite=!1,x.material.polygonOffset=!0,x.material.polygonOffsetFactor=.2,x.material.polygonOffsetUnits=.2,x.material.side=o.DoubleSide,x.material.premultipliedAlpha=!0,x.material.roughness=.25,x.material.color.set(15277667),C.receiveShadow=!0,x.receiveShadow=!0,f.attach(x),g.add(C,x),a=C.material.clone(),a.side=o.FrontSide,a.opacity=1,a.transparent=!1,a.depthWrite=!0,D.set(C.material,a),a=x.material.clone(),a.side=o.FrontSide,a.opacity=1,a.transparent=!1,a.depthWrite=!0,D.set(x.material,a),D.forEach(((e,a)=>{e.enableGrid=u.gridTexture,a.enableGrid=u.gridTexture})),M=new o.Mesh(new o.BufferGeometry,new o.MeshStandardMaterial({flatShading:!1,polygonOffset:!0,polygonOffsetUnits:.1,polygonOffsetFactor:.1})),M.castShadow=!0,M.receiveShadow=!0,E=M.material,g.add(M),S=new o.Mesh(M.geometry,new o.MeshBasicMaterial({wireframe:!0,color:0,opacity:.15,transparent:!0})),g.add(S),B=new(0,p.EdgesHelper),B.color.set(15277667),g.add(B),v=new(0,p.TriangleSetHelper),v.color.set(48340),g.add(v),I=new(0,h.MeshBVHVisualizer)(C,20),U=new(0,h.MeshBVHVisualizer)(x,20),g.add(I,U);const t=await(new(0,d.GLTFLoader)).setMeshoptDecoder(l.MeshoptDecoder).loadAsync("https://raw.githubusercontent.com/gkjohnson/3d-demo-data/main/models/stanford-bunny/bunny.glb");G=t.scene.children[0].geometry,G.computeVertexNormals(),w=new(0,n.GUI),w.add(u,"operation",{ADDITION:p.ADDITION,SUBTRACTION:p.SUBTRACTION,INTERSECTION:p.INTERSECTION,DIFFERENCE:p.DIFFERENCE}).onChange((()=>{A=!0})),w.add(u,"displayBrushes"),w.add(u,"displayControls"),w.add(u,"shadows"),w.add(u,"useGroups").onChange((()=>A=!0)),w.add(u,"vertexColors").onChange((e=>{C.material.vertexColors=e,C.material.needsUpdate=!0,x.material.vertexColors=e,x.material.needsUpdate=!0,D.forEach((a=>{a.vertexColors=e,a.needsUpdate=!0})),O.attributes=e?["color","position","normal"]:["position","normal"],A=!0})),w.add(u,"gridTexture").onChange((e=>{D.forEach(((a,t)=>{a.enableGrid=e,t.enableGrid=e}))})),w.add(u,"flatShading").onChange((e=>{C.material.flatShading=e,C.material.needsUpdate=!0,x.material.flatShading=e,x.material.needsUpdate=!0,D.forEach((a=>{a.flatShading=e,a.needsUpdate=!0}))}));const r=w.addFolder("brush 1");r.add(u,"brush1Shape",["sphere","box","cylinder","torus","torus knot","mesh"]).name("shape").onChange((e=>{F(C,e,u.brush1Complexity)})),r.add(u,"brush1Complexity",0,2).name("complexity").onChange((e=>{F(C,u.brush1Shape,e)})),r.addColor(u,"brush1Color").onChange((e=>{C.material.color.set(e),D.get(C.material).color.set(e)}));const H=w.addFolder("brush 2");H.add(u,"brush2Shape",["sphere","box","cylinder","torus","torus knot","mesh"]).name("shape").onChange((e=>{F(x,e,u.brush2Complexity)})),H.add(u,"brush2Complexity",0,2).name("complexity").onChange((e=>{F(x,u.brush2Shape,e)})),H.addColor(u,"brush2Color").onChange((e=>{x.material.color.set(e),D.get(x.material).color.set(e)}));const R=w.addFolder("debug");R.add(u,"enableDebugTelemetry").onChange((()=>A=!0)),R.add(u,"displayIntersectionEdges"),R.add(u,"displayTriangleIntersections"),R.add(u,"wireframe"),R.add(u,"displayBrush1BVH"),R.add(u,"displayBrush2BVH"),window.addEventListener("resize",(function(){c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),m.setSize(window.innerWidth,window.innerHeight)}),!1),window.addEventListener("keydown",(function(e){switch(e.code){case"KeyW":f.setMode("translate");break;case"KeyE":f.setMode("rotate");break;case"KeyR":f.setMode("scale")}})),N()}();
//# sourceMappingURL=simple.5d9f0c3e.js.map
